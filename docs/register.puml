@startuml
participant "Backend API" as API
participant "Database" as DB

== Регистрация пользователя на сервере ==
API -> API: Получить данные для регистрации (username, пароль)
API -> API: Проверить, что username уникален
API -> API: Сгенерировать хэш пароля
API -> API: Сгенерировать пару ключей RSA (public/private)
API -> DB: Создать новую запись пользователя с публичным ключом и хэшем пароля
DB --> API: Подтверждение создания пользователя
API -> API: Сгенерировать токен аутентификации для пользователя
API -> API: Логирование события регистрации
API --> API: Подготовка начальных данных (чаты, роли и т.п.)
API --> User: Вернуть приватный ключ и токен
@enduml
